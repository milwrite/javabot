<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarot Reading - Bot Sportello's Noir Terminal</title>
    <link rel="stylesheet" href="../page-theme.css">
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            padding: 80px 20px 20px 20px;
            overflow-x: auto;
            overflow-y: auto;
        }

        @media (max-width: 768px) {
            body {
                padding: 60px 5px 20px 5px;
            }
        }

        .tarot-container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .tarot-title {
            color: #00ffff;
            font-size: 2em;
            margin-bottom: 10px;
            text-shadow: 0 0 10px #00ffff;
        }

        .tarot-subtitle {
            color: #7ec8e3;
            font-size: 1.1em;
            margin-bottom: 30px;
        }

        .instruction-text {
            color: #7ec8e3;
            font-size: 0.9em;
            margin-bottom: 20px;
            opacity: 0.8;
        }

        .cards-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 40px 0;
            flex-wrap: wrap;
        }

        .card-wrapper {
            flex: 1;
            min-width: 150px;
            max-width: 200px;
        }

        .card-position {
            color: #00ffff;
            font-size: 0.9em;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .tarot-card {
            width: 100%;
            aspect-ratio: 2/3;
            background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
            border: 2px solid #7ec8e3;
            border-radius: 8px;
            cursor: pointer;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s, border-color 0.3s;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .tarot-card:hover {
            border-color: #00ffff;
            box-shadow: 0 0 20px rgba(126, 200, 227, 0.3);
        }

        .tarot-card.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px;
            border-radius: 6px;
        }

        .card-back {
            background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
            color: #7ec8e3;
            font-size: 3em;
        }

        .card-front {
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
            transform: rotateY(180deg);
            flex-direction: column;
            text-align: center;
        }

        .card-name {
            color: #00ffff;
            font-size: 1.1em;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 0 5px #00ffff;
        }

        .card-symbol {
            color: #7ec8e3;
            font-size: 2em;
            margin: 10px 0;
        }

        .interpretation {
            background: rgba(126, 200, 227, 0.1);
            border: 1px solid #7ec8e3;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s, transform 0.5s;
        }

        .interpretation.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .interpretation-title {
            color: #00ffff;
            font-size: 1.2em;
            margin-bottom: 10px;
        }

        .interpretation-text {
            color: #7ec8e3;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .shuffle-btn {
            background: #ff0000;
            color: #0a0a0a;
            border: 2px solid #ff0000;
            padding: 15px 40px;
            font-family: 'Courier Prime', monospace;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s;
            margin: 30px auto;
            display: inline-block;
            text-transform: uppercase;
            letter-spacing: 2px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            min-height: 44px;
        }

        .shuffle-btn:hover {
            background: #0a0a0a;
            color: #ff0000;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
        }

        .shuffle-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .status-message {
            color: #00ffff;
            font-size: 1em;
            margin: 20px 0;
            min-height: 24px;
            text-shadow: 0 0 5px #00ffff;
        }

        @media (max-width: 768px) {
            .tarot-title {
                font-size: 1.5em;
            }

            .cards-container {
                gap: 15px;
            }

            .card-wrapper {
                min-width: 100px;
                max-width: 120px;
            }

            .card-name {
                font-size: 0.9em;
            }

            .card-symbol {
                font-size: 1.5em;
            }

            .interpretation {
                padding: 15px;
            }

            .shuffle-btn {
                padding: 12px 30px;
                font-size: 1em;
            }
        }

        @media (max-width: 480px) {
            .tarot-title {
                font-size: 1.3em;
            }

            .cards-container {
                gap: 10px;
            }

            .card-wrapper {
                min-width: 90px;
                max-width: 100px;
            }

            .card-name {
                font-size: 0.8em;
            }

            .card-symbol {
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>
    <a href="../index.html" class="home-link">‚Üê BACK TO TERMINAL</a>

    <div class="tarot-container">
        <h1 class="tarot-title">‚ü° TAROT READING ‚ü°</h1>
        <p class="tarot-subtitle">Three-Card Spread: Past ‚Ä¢ Present ‚Ä¢ Future</p>
        <p class="instruction-text">Tap each card to reveal your reading</p>

        <div class="status-message" id="statusMessage"></div>

        <div class="cards-container" id="cardsContainer">
            <div class="card-wrapper">
                <div class="card-position">Past</div>
                <div class="tarot-card" data-position="0">
                    <div class="card-face card-back">‚óà</div>
                    <div class="card-face card-front">
                        <div class="card-name" id="cardName0"></div>
                        <div class="card-symbol" id="cardSymbol0"></div>
                    </div>
                </div>
            </div>

            <div class="card-wrapper">
                <div class="card-position">Present</div>
                <div class="tarot-card" data-position="1">
                    <div class="card-face card-back">‚óà</div>
                    <div class="card-face card-front">
                        <div class="card-name" id="cardName1"></div>
                        <div class="card-symbol" id="cardSymbol1"></div>
                    </div>
                </div>
            </div>

            <div class="card-wrapper">
                <div class="card-position">Future</div>
                <div class="tarot-card" data-position="2">
                    <div class="card-face card-back">‚óà</div>
                    <div class="card-face card-front">
                        <div class="card-name" id="cardName2"></div>
                        <div class="card-symbol" id="cardSymbol2"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="interpretationsContainer"></div>

        <button class="shuffle-btn" id="shuffleBtn">Draw New Reading</button>
    </div>

    <script>
        const tarotDeck = [
            {
                name: "The Fool",
                symbol: "üåü",
                meaning: "New beginnings, spontaneity, innocence. A journey is about to begin. Trust in the unknown and embrace fresh starts with an open heart."
            },
            {
                name: "The Magician",
                symbol: "‚ú®",
                meaning: "Manifestation, resourcefulness, power. You have all the tools you need. Channel your will and focus to bring your desires into reality."
            },
            {
                name: "The High Priestess",
                symbol: "üåô",
                meaning: "Intuition, sacred knowledge, the subconscious. Listen to your inner voice. Secrets are being revealed through dreams and quiet reflection."
            },
            {
                name: "The Empress",
                symbol: "üëë",
                meaning: "Abundance, nurturing, fertility. Creative energy flows through you. Embrace growth, beauty, and the natural cycles of life."
            },
            {
                name: "The Emperor",
                symbol: "‚öîÔ∏è",
                meaning: "Authority, structure, control. Establish order and take command. Leadership and discipline create stability in chaos."
            },
            {
                name: "The Hierophant",
                symbol: "üìø",
                meaning: "Tradition, conformity, spiritual wisdom. Seek guidance from established systems. Honor the wisdom passed down through generations."
            },
            {
                name: "The Lovers",
                symbol: "üíï",
                meaning: "Union, choices, alignment. A significant relationship or decision emerges. Follow your heart while honoring your values."
            },
            {
                name: "The Chariot",
                symbol: "üèá",
                meaning: "Willpower, determination, victory. Harness opposing forces and drive forward. Success comes through focused action and self-discipline."
            },
            {
                name: "Strength",
                symbol: "ü¶Å",
                meaning: "Courage, compassion, inner power. True strength is gentle. Face challenges with patience and trust in your resilient spirit."
            },
            {
                name: "The Hermit",
                symbol: "üïØÔ∏è",
                meaning: "Introspection, solitude, inner guidance. Withdraw to find answers within. The light you seek comes from your own wisdom."
            },
            {
                name: "Wheel of Fortune",
                symbol: "‚ò∏Ô∏è",
                meaning: "Cycles, destiny, turning point. Change is inevitable and necessary. Trust that the wheel turns in your favor."
            },
            {
                name: "Justice",
                symbol: "‚öñÔ∏è",
                meaning: "Fairness, truth, cause and effect. Balance is being restored. Actions have consequences; truth will prevail."
            },
            {
                name: "The Hanged Man",
                symbol: "üîÑ",
                meaning: "Surrender, new perspective, letting go. Sometimes pause brings clarity. Release control to gain deeper understanding."
            },
            {
                name: "Death",
                symbol: "ü¶ã",
                meaning: "Transformation, endings, rebirth. Something must end for new life to begin. Embrace change as a natural cycle of renewal."
            },
            {
                name: "Temperance",
                symbol: "‚öóÔ∏è",
                meaning: "Balance, moderation, patience. Find the middle path. Blend opposing elements to create harmony and healing."
            },
            {
                name: "The Devil",
                symbol: "üòà",
                meaning: "Bondage, materialism, shadow self. Examine what binds you. Awareness of your chains is the first step to freedom."
            },
            {
                name: "The Tower",
                symbol: "‚ö°",
                meaning: "Upheaval, revelation, liberation. Sudden change breaks false structures. From destruction comes opportunity to rebuild stronger."
            },
            {
                name: "The Star",
                symbol: "‚≠ê",
                meaning: "Hope, inspiration, serenity. Healing energy flows to you. Trust that you are guided and your wishes are heard."
            },
            {
                name: "The Moon",
                symbol: "üåï",
                meaning: "Illusion, intuition, the unconscious. Not all is as it seems. Navigate uncertainty by trusting your deeper knowing."
            },
            {
                name: "The Sun",
                symbol: "‚òÄÔ∏è",
                meaning: "Joy, success, vitality. Clarity and warmth illuminate your path. Celebrate life and share your radiant energy."
            },
            {
                name: "Judgement",
                symbol: "üìØ",
                meaning: "Reflection, reckoning, absolution. A moment of awakening arrives. Review the past to step into your higher calling."
            },
            {
                name: "The World",
                symbol: "üåç",
                meaning: "Completion, accomplishment, integration. A cycle reaches fulfillment. Celebrate your journey and prepare for the next adventure."
            }
        ];

        let currentReading = [];
        let revealedCards = new Set();

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function drawReading() {
            const shuffled = shuffleArray(tarotDeck);
            currentReading = shuffled.slice(0, 3);
            revealedCards.clear();
            
            document.querySelectorAll('.tarot-card').forEach(card => {
                card.classList.remove('flipped');
            });

            document.getElementById('interpretationsContainer').innerHTML = '';
            document.getElementById('statusMessage').textContent = '';

            currentReading.forEach((card, index) => {
                document.getElementById(`cardName${index}`).textContent = card.name;
                document.getElementById(`cardSymbol${index}`).textContent = card.symbol;
            });
        }

        function revealCard(position) {
            const card = document.querySelector(`[data-position="${position}"]`);
            if (card.classList.contains('flipped')) return;

            card.classList.add('flipped');
            revealedCards.add(position);

            setTimeout(() => {
                showInterpretation(position);
            }, 300);

            if (revealedCards.size === 3) {
                setTimeout(() => {
                    document.getElementById('statusMessage').textContent = 'Reading complete. Draw again when ready.';
                }, 1000);
            }
        }

        function showInterpretation(position) {
            const positions = ['Past', 'Present', 'Future'];
            const card = currentReading[position];
            const container = document.getElementById('interpretationsContainer');

            const interpretation = document.createElement('div');
            interpretation.className = 'interpretation';
            interpretation.innerHTML = `
                <div class="interpretation-title">${positions[position]}: ${card.name}</div>
                <div class="interpretation-text">${card.meaning}</div>
            `;

            container.appendChild(interpretation);

            setTimeout(() => {
                interpretation.classList.add('visible');
            }, 50);
        }

        function setupEventListeners() {
            document.querySelectorAll('.tarot-card').forEach(card => {
                const handleReveal = () => {
                    const position = parseInt(card.dataset.position);
                    revealCard(position);
                };

                card.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    handleReveal();
                }, { passive: false });

                card.addEventListener('click', handleReveal);
            });

            const shuffleBtn = document.getElementById('shuffleBtn');
            
            const handleShuffle = () => {
                shuffleBtn.disabled = true;
                document.getElementById('statusMessage').textContent = 'Shuffling the deck...';
                
                setTimeout(() => {
                    drawReading();
                    shuffleBtn.disabled = false;
                    document.getElementById('statusMessage').textContent = 'New reading drawn. Tap cards to reveal.';
                }, 500);
            };

            shuffleBtn.addEventListener('touchstart', (e) => {
                e.preventDefault();
                if (!shuffleBtn.disabled) {
                    handleShuffle();
                }
            }, { passive: false });

            shuffleBtn.addEventListener('click', () => {
                if (!shuffleBtn.disabled) {
                    handleShuffle();
                }
            });
        }

        drawReading();
        setupEventListeners();
        document.getElementById('statusMessage').textContent = 'Tap each card to reveal your reading.';
    </script>
</body>
</html>